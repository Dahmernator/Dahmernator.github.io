<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Game Canvas with Gravity</title>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
<style>
    canvas {
        border: 1px solid black;
    }
</style>
</head>

<body>
<canvas id="gameCanvas" width="800" height="400"></canvas>
<script src="https://www.gstatic.com/firebasejs/3.7.4/firebase.js"></script>
<script>
    //initializes canvas
    var canvas = document.getElementById("gameCanvas");
    var ctx = canvas.getContext("2d");

    //initalizes firebase
    const firebaseConfig = {
        apiKey: "AIzaSyD5aNloa6l4xAyIKSP78bU_Hjl_iRRoJKA",
        authDomain: "volleyball-game-5344a.firebaseapp.com",
        databaseURL: "https://volleyball-game-5344a-default-rtdb.firebaseio.com",
        projectId: "volleyball-game-5344a",
        storageBucket: "volleyball-game-5344a.appspot.com",
        messagingSenderId: "12860376010",
        appId: "1:12860376010:web:f6c45720c5bc83ccfbc533",
        measurementId: "G-D00RCW570B"
    };

    firebase.initializeApp(firebaseConfig);
    var server = firebase.database().ref('server-0');
    

    function drawRectangle(x, y, width, height) {
            ctx.clearRect(0, 0, canvas.width, canvas.height); // Clear the canvas
            ctx.fillStyle = "blue"; // Set rectangle color
            ctx.fillRect(x, y, width, height); // Draw rectangle
        }

        // Real-time listener for changes in the RTDB
        server.on('value', function(snapshot) {
            var serverData = snapshot.val();
            console.log(serverData, serverData.player1.xPos);
            console.log("changed data");
            // Assuming the server data contains properties for rectangle dimensions (x, y, width, height)
            var rectX = serverData.player1.xPos;
            var rectY = serverData.player1.yPos;
            var rectWidth = 10;
            var rectHeight = 10;
            // Draw the updated rectangle
            drawRectangle(rectX, rectY, rectWidth, rectHeight);
        }, function(error) {
            console.error('Error fetching data:', error);
        });
    //gets and reads the data from the rtdb
    // async function getData() {
    //     try {
    //         const serverData = await readData();
    //         console.log(serverData);
            
    //     } catch (error) {
    //         console.error('Error fetching and processing data:', error);
    //     }
    // }
    // function readData() {
    //     return new Promise((resolve, reject) => {
    //         const teamData = [];
    //         teams.once('value', (snapshot) => {
    //             const data = snapshot.val();
    //             resolve(data);
    //         }, (error) => {
    //             reject(error);
    //         });
    //     });
    // }


</script>
</body>
</html>
